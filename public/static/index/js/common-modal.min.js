var msg_timeout;

function CommonModal() {
    this.alert = function (title, msg, callback) {
        var close_btn = !0;
        if (typeof title === 'object') {
            msg = title.message;
            if (title.callback !== undefined) callback = title.callback;
            if (title.closeBtn !== undefined) close_btn = title.closeBtn;
            if (title.buttons !== undefined && title.buttons.ok !== undefined) var btn_ok = title.buttons.ok;
            if (title.title === undefined) {
                title = ''
            } else {
                title = title.title
            }
        }
        if (typeof msg === 'function') {
            callback = msg;
            msg = title;
            title = ''
        }
        if (msg === undefined) {
            msg = title;
            title = ''
        }
        btn_ok = btn_ok === undefined || btn_ok === '' ? '确定' : btn_ok;
        title = title ? title : '';
        var close_html = close_btn ? '<div class="modal-close" id="modal-close" onclick="closeModal()">×</div>' : '';
        var html = '<div class="modal-box modal-alert" id="modal-box">' + close_html + '<div class="modal-title">' + title + '</div>' + '<div class="modal-content">' + msg + '</div>' + '<div class="btns-alert"><a class="modal-ok btn-primary" id="modal-ok">' + btn_ok + '</a></div>' + '</div>' + '<div class="graybg block" id="graybg"></div>';
        var temp = document.createElement('div');
        temp.innerHTML = html;
        document.body.appendChild(temp.firstChild);
        document.body.appendChild(temp.lastChild);
        var modal_ok = document.getElementById('modal-ok');
        var closeAlert = function () {
            closeModal();
            if (typeof callback === 'function') callback()
        };
        modal_ok.onclick = closeAlert;
        var modal_close = document.getElementById('modal-close');
        if (modal_close !== null) modal_close.onclick = closeAlert
    };
    this.confirm = function (title, msg, yes) {
        var close_btn = !0;
        if (typeof title === 'object') {
            msg = title.message;
            if (title.yes !== undefined) yes = title.yes;
            if (title.no !== undefined) var no = title.no;
            if (title.closeBtn !== undefined) close_btn = title.closeBtn;
            if (title.buttons !== undefined && title.buttons.yes !== undefined) var btn_yes = title.buttons.yes;
            if (title.buttons !== undefined && title.buttons.no !== undefined) var btn_no = title.buttons.no;
            if (title.title === undefined) {
                title = ''
            } else {
                title = title.title
            }
        }
        if (typeof msg === 'function') {
            yes = msg;
            msg = title;
            title = ''
        }
        if (msg === undefined) {
            msg = title;
            title = ''
        }
        btn_yes = btn_yes === undefined || btn_yes === '' ? '确定' : btn_yes;
        btn_no = btn_no === undefined || btn_no === '' ? '取消' : btn_no;
        var closeConfirm = function () {
            closeModal();
            if (typeof no === 'function') no()
        };
        title = title !== undefined && title !== '' ? title : '';
        var close_html = close_btn ? '<div class="modal-close" id="modal-close">×</div>' : '';
        var html = '<div class="modal-box modal-confirm" id="modal-box">' + close_html + '<div class="modal-title">' + title + '</div>' + '<div class="modal-content">' + msg + '</div>' + '<div class="btns-confirm">' + '<a class="modal-no btn-default" id="modal-no" role="button">' + btn_no + '</a>&nbsp;' + '<a class="modal-yes btn-primary" id="modal-yes" role="button">' + btn_yes + '</a>' + '</div>' + '</div>' + '<div class="graybg block" id="graybg"></div>';
        var temp = document.createElement('div');
        temp.innerHTML = html;
        document.body.appendChild(temp.firstChild);
        document.body.appendChild(temp.lastChild);
        var modal_yes = document.getElementById('modal-yes');
        modal_yes.onclick = function () {
            closeModal();
            if (typeof yes === 'function') yes()
        };
        var modal_no = document.getElementById('modal-no');
        modal_no.onclick = closeConfirm;
        var modal_close = document.getElementById('modal-close');
        if (modal_close !== null) modal_close.onclick = closeConfirm
    };
    this.msg = function (msg, delay) {
        var html = '<div class="modal-box modal-msg" id="modal-msg-box">' + '<div class="modal-content">' + msg + '</div>' + '</div>';
        var temp = document.createElement('div');
        temp.innerHTML = html;
        document.body.appendChild(temp.firstChild);
        if (delay === undefined) delay = 2000;
        msg_timeout = setTimeout(closeMsgModal, delay)
    }
}

function closeModal() {
    var modal_box = document.getElementById('modal-box');
    var graybg = document.getElementById('graybg');
    modal_box.parentNode.removeChild(modal_box);
    graybg.parentNode.removeChild(graybg)
}

function closeMsgModal() {
    var modal_msg_box = document.getElementById('modal-msg-box');
    document.body.removeChild(modal_msg_box)
}

var diybox = new CommonModal()